Это REST API позволяет отправлять данные о перевалах, получать отдельные записи и список всех записей пользователя, а также редактировать записи с определенным статусом.

Требования
Python 3.6+
Flask
Flask-RESTful (если понадобится)
Установка
Клонируйте репозиторий:

bash
Copiar código
git clone <URL_репозитория>
cd <название_проекта>
Установите необходимые зависимости:

bash
Copiar código
pip install -r requirements.txt
Запустите сервер:

bash
Copiar código
python app.py
Сервер будет запущен по адресу http://127.0.0.1:5000/.

Методы API
POST /submitData
Отправка данных о новом перевале.

URL: /submitData

Метод: POST

Тело запроса: JSON с обязательными полями:

json
Copiar código
{
  "title": "Название перевала",
  "add_time": "2024-01-01T12:00:00",
  "user": "имя_пользователя",
  "coords": { "latitude": 55.75, "longitude": 37.61 },
  "level": "уровень_сложности",
  "images": ["ссылка_на_изображение1", "ссылка_на_изображение2"]
}
Ответ:

Код 200: успешное добавление данных, возвращает id записи
Код 400: отсутствуют обязательные поля
Код 500: ошибка при добавлении данных
GET /submitData/<id>
Получение одной записи по её id.

URL: /submitData/<id>
Метод: GET
Параметры: id — уникальный идентификатор записи
Ответ:
Код 200: JSON с данными записи, включая статус модерации
Код 404: запись не найдена
Пример ответа:

json
Copiar código
{
  "id": 1,
  "title": "Название перевала",
  "add_time": "2024-01-01T12:00:00",
  "user": "имя_пользователя",
  "coords": { "latitude": 55.75, "longitude": 37.61 },
  "level": "уровень_сложности",
  "images": ["ссылка_на_изображение1", "ссылка_на_изображение2"],
  "moderation_status": "new"
}
PATCH /submitData/<id>
Редактирование существующей записи, если её статус — new.

URL: /submitData/<id>
Метод: PATCH
Параметры: id — уникальный идентификатор записи
Тело запроса: JSON с данными для обновления (те же поля, что и для метода submitData)
Ограничения: Нельзя редактировать поля full_name, email, phone_number
Ответ:
Код 200: успешное обновление записи
json
Copiar código
{ "state": 1, "message": "Запись успешно обновлена." }
Код 400: не удалось обновить запись, описание ошибки
json
Copiar código
{ "state": 0, "message": "Запись не может быть изменена; статус не 'new'." }
GET /submitData/?user__email=<email>
Получение списка всех записей, отправленных пользователем с заданным email.

URL: /submitData
Метод: GET
Параметры запроса: user__email — адрес электронной почты пользователя
Ответ:
Код 200: JSON со списком всех записей, отправленных пользователем
Код 400: отсутствует параметр user__email
Пример ответа:

json
Copiar código
[
  {
    "id": 1,
    "title": "Название перевала",
    "add_time": "2024-01-01T12:00:00",
    "user": "имя_пользователя",
    "coords": { "latitude": 55.75, "longitude": 37.61 },
    "level": "уровень_сложности",
    "images": ["ссылка_на_изображение1", "ссылка_на_изображение2"],
    "moderation_status": "new"
  },
  {
    "id": 2,
    "title": "Название перевала 2",
    "add_time": "2024-01-02T14:00:00",
    "user": "имя_пользователя",
    "coords": { "latitude": 56.0, "longitude": 38.0 },
    "level": "уровень_сложности",
    "images": ["ссылка_на_изображение3"],
    "moderation_status": "approved"
  }
]
Запуск тестового сервера
Для запуска сервера разработки:

bash
Copiar código
python app.py
Теперь сервер доступен по адресу http://127.0.0.1:5000/.






